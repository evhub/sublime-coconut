comment: '''
  
  		Copyright (C) 2013 - 2014 Peter Varo
  		<http://github.com/petervaro/python>
  		Copyright (C) 2016 Evan Hubinger
  		<http://github.com/evhub/sublime-coconut>
  
  		This program is free software: you can redistribute it
  		and/or modify it under the terms of the GNU General
  		Public License as published by the Free Software
  		Foundation, either version 3 of the License, or (at your
  		option) any later version.
  
  		This program is distributed in the hope that it will be
  		useful, but WITHOUT ANY WARRANTY; without even the
  		implied warranty of MERCHANTABILITY or FITNESS FOR A
  		PARTICULAR PURPOSE. See the GNU General Public License
  		for more details.
  
  		You should have received a copy of the GNU General Public
  		License along with this program, most likely a file in
  		the root directory, called "LICENSE". If not, see
  		<http://www.gnu.org/licenses>.
  	
'''
fileTypes: [
  "coc"
  "coco"
  "coconut"
  "py_template"
]
firstLineMatch: "^#!/.*\\bcoconut[\\d.-]*\\b"
foldingStartMarker: "^\\s*(def|class|(?<!\\\\)data)\\s+([.\\w>]+)\\s*(\\((.*)\\))?\\s*:|\\{\\s*$|\\(\\s*$|\\[\\s*$|^\\s*\"\"\"(?=.)(?!.*\"\"\")"
foldingStopMarker: "^\\s*$|^\\s*\\}|^\\s*\\]|^\\s*\\)|^\\s*\"\"\"\\s*$"
name: "Coconut"
patterns: [
  {
    include: "#comment"
  }
  {
    match: "\\b0b[01_]+"
    name: "constant.numeric.integer.binary.coconut"
  }
  {
    match: "\\b0x[\\h_]+"
    name: "constant.numeric.integer.hexadecimal.coconut"
  }
  {
    match: "\\b0o[0-7_]+"
    name: "constant.numeric.integer.octal.coconut"
  }
  {
    match: "(?<!\\.)(?<=\\W|^)\\.\\d[\\d_]*([eE][+-]?\\d[\\d_]*)?[iIjJ]?(?!\\.)"
    name: "constant.numeric.float_and_complex.decimal.floatnumber.coconut"
  }
  {
    match: "\\d[\\d_]*\\.([\\d_]*([eE][+-]?\\d[\\d_]*)?)?[iIjJ]?(?=\\W)(?!\\.)"
    name: "constant.numeric.float_and_complex.decimal.pointfloat.coconut"
  }
  {
    match: "(?<![\\.\\d_])\\d[\\d_]*[eE][+-]?\\d[\\d_]*[iIjJ]?"
    name: "constant.numeric.float_and_complex.decimal.exponent.coconut"
  }
  {
    match: "\\b(?<!\\.)([1-9][\\d_]*|0)[iIjJ]?"
    name: "constant.numeric.integer_and_complex.decimal.coconut"
  }
  {
    match: "\\b(global|nonlocal)\\b"
    name: "storage.modifier.declaration.coconut"
  }
  {
    match: "\\b(async|await)\\b"
    name: "storage.modifier.coroutine.coconut"
  }
  {
    match: "\\b(import|from)\\b"
    name: "keyword.control.import_and_import_from.coconut"
  }
  {
    match: "\\b(elif|else|except|finally|for|if|try|while|with|break|continue|pass|raise|return|yield|(?<!\\\\)(match|case))\\b"
    name: "keyword.control.flow_block_delimiters.coconut"
  }
  {
    match: "\\b(and|in|is|not|or)\\b"
    name: "keyword.operator.bool.logical.coconut"
  }
  {
    match: "\\b(as|assert|del|\\?)\\b"
    name: "keyword.other.coconut"
  }
  {
    match: "<=|>=|==|<|>|!=|≠|≤|≥|¬="
    name: "keyword.operator.comparison.coconut"
  }
  {
    match: "(\\+|-|\\*|\\*\\*|/|//|%|<<|>>|&|\\^|~|@|::|\\$|\\|>|<\\||\\|\\*>|<\\*\\||`|<?\\*?\\.\\.\\*?>?|\\?\\??|\\||→|\\*?↦|↤\\*?|<?\\*?∘\\*?>?|⋅|↑|÷|−|⁻|∧|∩|∨|∪|⊻|⊕|«|»|×|…)="
    name: "keyword.operator.assignment.augmented.coconut"
  }
  {
    match: "\\+|-|\\*|\\*\\*|/|//|%|<<|>>|&|\\^|~|@|::|\\$|\\|>|<\\||\\|\\*>|<\\*\\||`|<?\\*?\\.\\.\\*?>?|\\?\\??|\\||→|\\*?↦|↤\\*?|<?\\*?∘\\*?>?|⋅|↑|÷|−|⁻|¬|∧|∩|∨|∪|⊻|⊕|«|»|×|…"
    name: "keyword.operator.arithmetic.coconut"
  }
  {
    match: "=|->"
    name: "keyword.operator.value_and_annotation_assignment.coconut"
  }
  {
    begin: "^\\s*(class|(?<!\\\\)data)\\s+(?=[a-zA-Z_]\\w*(\\s*\\()?)"
    beginCaptures:
      "1":
        name: "storage.type.class.coconut"
    end: "\\)?([ \\t\\r\\f\\v]+\\w+)?[ \\t\\r\\f\\v]*(?:\\n|:|(?=#))"
    endCaptures:
      "1":
        name: "entity.other.inherited-class.coconut"
      "3":
        name: "invalid.illegal.missing_section_begin.coconut"
    name: "meta.class.coconut"
    patterns: [
      {
        include: "#class_entity_name"
      }
      {
        include: "#class_inheritance"
      }
    ]
  }
  {
    begin: "^\\s*(match\\s+)?(async\\s+)?(match\\s+)?(def)\\s+(?=[a-zA-Z_][\\w.]*\\s*\\()"
    beginCaptures:
      "1":
        name: "keyword.other.coconut"
      "2":
        name: "storage.modifier.coroutine.coconut"
      "3":
        name: "keyword.other.coconut"
      "4":
        name: "storage.type.function.coconut"
    end: "\\s*(:|=)"
    endCaptures:
      "2":
        name: "invalid.illegal.missing_section_begin.coconut"
    name: "meta.function.coconut"
    patterns: [
      {
        include: "#function_entity_name"
      }
      {
        include: "#function_arguments"
      }
      {
        include: "#function_annotation"
      }
    ]
  }
  {
    begin: "\\b(lambda)\\b"
    beginCaptures:
      "1":
        name: "storage.type.function.anonymous.coconut"
    end: ":"
    name: "meta.function.anonymous.coconut"
    patterns: [
      {
        begin: "\\s+"
        end: "(?=:)"
        patterns: [
          {
            begin: "\\b([a-zA-Z_]\\w*)\\s*(=)"
            beginCaptures:
              "1":
                name: "variable.parameter.function.coconut"
              "2":
                name: "keyword.operator.assignment.coconut"
            end: "(?=,|:)"
            patterns: [
              {
                include: "$self"
              }
            ]
          }
          {
            match: "\\b[a-zA-Z_]\\w*"
            name: "variable.parameter.function.coconut"
          }
        ]
      }
    ]
  }
  {
    match: "@"
    name: "keyword.operator.arithmetic.coconut"
  }
  {
    match: "\\b(None|True|False|Ellipsis|NotImplemented)\\b"
    name: "constant.language.word_like.coconut"
  }
  {
    match: "(?<=\\W|^)\\.\\.\\.(?=\\W|$)"
    name: "constant.language.symbol_like.coconut"
  }
  {
    match: "\\b(def|lambda)\\b"
    name: "storage.type.function.coconut"
  }
  {
    match: "\\b(class|(?<!\\\\)data)\\b"
    name: "storage.type.class.coconut"
  }
  {
    include: "#builtin_types"
  }
  {
    include: "#builtin_functions"
  }
  {
    include: "#builtin_exceptions"
  }
  {
    include: "#magic_function_names"
  }
  {
    include: "#magic_variable_names"
  }
  {
    include: "#language_variables"
  }
  {
    begin: "\\["
    end: "\\]"
    name: "meta.structure.list.coconut"
    patterns: [
      {
        begin: "(?<=\\[|,)\\s*(?![\\],])"
        end: "\\s*(?:,|(?=\\]))"
        patterns: [
          {
            include: "$self"
          }
        ]
      }
    ]
  }
  {
    begin: "\\{"
    end: "\\}"
    name: "meta.structure.dictionary.coconut"
    patterns: [
      {
        begin: "(?<=\\{|,|^)\\s*(?![,}])"
        end: "\\s*(?:(?=\\})|:)"
        patterns: [
          {
            include: "$self"
          }
        ]
      }
      {
        begin: "(?<=:|^)\\s*"
        end: "\\s*(?:(?=\\})|,)"
        patterns: [
          {
            include: "$self"
          }
        ]
      }
    ]
  }
  {
    begin: "(?<=,|;|=|\\+|-|\\*|/|\\||:|<|>|~|%|\\^|\\\\|@|`|\\\\)\\s*\\("
    end: "\\)"
    name: "meta.structure.group.coconut"
    patterns: [
      {
        include: "$self"
      }
    ]
  }
  {
    begin: "(?<!:|,|;|\\[|\\{|\\}|=|\\+|-|\\*|/|\\||<|>|~|%|\\^|\\\\|\\n|@|`|\\\\)\\s*\\$?\\("
    end: "\\)"
    name: "meta.function_call.coconut"
    patterns: [
      {
        include: "#keyword_arguments"
      }
      {
        include: "$self"
      }
    ]
  }
  {
    include: "#fstring_quoted"
  }
  {
    include: "#rstring_quoted"
  }
  {
    include: "#string_quoted"
  }
]
repository:
  builtin_exceptions:
    match: "\\b((Arithmetic|Buffer|Lookup|Assertion|Attribute|EOF|FloatingPoint|Import|Index|Key|Memory|Name|NotImplemented|OS|Overflow|Reference|Runtime|Syntax|Indentation|Tab|System|Type|UnboundLocal|Unicode(Encode|Decode|Translate)?|Value|ZeroDivision|Environment|IO|VMS|Windows|BlockingIO|ChildProcess|BrokenPipe|Connection(Aborted|Refused|Reset)?|FileExists|FileNotFound|Interrupted|(Is|Not)ADirectory|Permission|ProcessLookup|Timeout)Error|(User|Deprecation|PendingDeprecation|Syntax|Runtime|Future|Import|Bytes|Resource)Warning|(Base)?Exception|(Generator|System)Exit|KeyboardInterrupt|Stop(Async)?Iteration|Warning|MatchError)\\b"
    name: "support.type.exception.coconut"
  builtin_functions:
    match: "(?<!(?<!\\.)\\.)\\b(__import__|abs|all|any|ascii|bin|callable|(py_)?chr|compile|delattr|dir|divmod|eval|exec|(py_)?filter|format|getattr|globals|hasattr|hash|help|(py_)?hex|id|(py_)?input|isinstance|issubclass|iter|len|locals|vars|min|next|oct|ord|pow|(py_)?print|repr|round|setattr|sorted|sum|max|reduce|takewhile|dropwhile|tee|makedata|consume|py_raw_input|py_xrange|addpattern|recursive_iterator|reiterable)\\b"
    name: "support.function.builtin.coconut"
  builtin_types:
    match: "(?<!(?<!\\.)\\.)\\b(bool|bytearray|bytes|classmethod|complex|dict|(py_)?range|tuple|enumerate|float|frozenset|(py_)?int|list|memoryview|(py_)?object|(py_)?open|property|reversed|set|slice|staticmethod|(py_)?str|super|type|(py_)?map|(py_)?zip|parallel_map|count|concurrent_map|fmap|starmap)\\b"
    name: "support.type.coconut"
  class_entity_name:
    begin: "(?=[a-zA-Z_]\\w*)"
    contentName: "entity.name.type.class.coconut"
    end: "(?!\\w)\\s*(\\bfrom\\b)?"
    endCaptures:
      "1":
        name: "storage.type.class.coconut"
    patterns: [
      {
        include: "#entity_name_class"
      }
    ]
  class_inheritance:
    begin: "\\("
    contentName: "meta.class.inheritance.coconut"
    end: "\\)(\\s*\\bfrom\\b)?|\\s*(?=:|\\n)"
    endCaptures:
      "1":
        name: "storage.type.class.coconut"
    patterns: [
      {
        begin: "(?<=\\(|,)\\s*"
        contentName: "entity.other.inherited-class.coconut"
        end: "\\s*(?:,|(?=\\)))"
        endCaptures:
          "1":
            name: "punctuation.separator.inheritance.coconut"
        patterns: [
          {
            include: "$self"
          }
        ]
      }
    ]
  comment:
    patterns: [
      {
        include: "#comment_extended_re"
      }
      {
        include: "#comment_extended_old"
      }
      {
        include: "#comment_extended_fmt"
      }
      {
        include: "#comment_extended_tmp"
      }
      {
        match: "#.*$\\n?"
        name: "comment.line.hashmark.coconut"
      }
    ]
  comment_extended_fmt:
    begin: "(?i)(#(#|\\s)*syntax:fmt)$"
    beginCaptures:
      "1":
        name: "comment.line.hashmark.extended.fmt.open.coconut"
    end: "(?i)(#(#|\\s)*end:fmt)$"
    endCaptures:
      "1":
        name: "comment.line.hashmark.extended.fmt.close.coconut"
    name: "meta.syntax.comment.line.hashmark.extended.fmt.coconut"
    patterns: [
      {
        include: "#string_quoted_format"
      }
      {
        include: "$self"
      }
    ]
  comment_extended_old:
    begin: "(?i)(#(#|\\s)*syntax:old)$"
    beginCaptures:
      "1":
        name: "comment.line.hashmark.extended.fmt.open.coconut"
    end: "(?i)(#(#|\\s)*end:old)$"
    endCaptures:
      "1":
        name: "comment.line.hashmark.extended.fmt.close.coconut"
    name: "meta.syntax.comment.line.hashmark.extended.fmt.coconut"
    patterns: [
      {
        include: "#string_quoted_old"
      }
      {
        include: "$self"
      }
    ]
  comment_extended_re:
    begin: "(?i)(#(#|\\s)*syntax:re)$"
    beginCaptures:
      "1":
        name: "comment.line.hashmark.extended.re.open.coconut"
    end: "(?i)(#(#|\\s)*end:re)$"
    endCaptures:
      "1":
        name: "comment.line.hashmark.extended.re.close.coconut"
    name: "meta.syntax.comment.line.hashmark.extended.re.coconut"
    patterns: [
      {
        include: "#string_quoted_regex"
      }
      {
        include: "$self"
      }
    ]
  comment_extended_tmp:
    begin: "(?i)(#(#|\\s)*syntax:tmp)$"
    beginCaptures:
      "1":
        name: "comment.line.hashmark.extended.tmp.open.coconut"
    end: "(?i)(#(#|\\s)*end:tmp)$"
    endCaptures:
      "1":
        name: "comment.line.hashmark.extended.tmp.close.coconut"
    name: "meta.syntax.comment.line.hashmark.extended.tmp.coconut"
    patterns: [
      {
        include: "#string_quoted_template"
      }
      {
        include: "$self"
      }
    ]
  constant_placeholder:
    match: "%(\\(\\w+\\))?#?0?-?[ ]?\\+?(\\d*|\\*)(\\.(\\d*|\\*))?[hlL]?[diouxXeEfFgGcrs%]"
    name: "string.interpolated.placeholder.coconut"
  entity_name_class:
    patterns: [
      {
        include: "#illegal_names"
      }
      {
        include: "#generic_names"
      }
    ]
  entity_name_function:
    patterns: [
      {
        include: "#magic_function_names"
      }
      {
        include: "#illegal_names"
      }
      {
        include: "#generic_names"
      }
    ]
  escaped_characters:
    match: "\\\\(x\\h{2}|[0-7]{3}|\\n|\\\"|\\'|a|b|f|n|r|t|v|\\\\)"
    name: "constant.character.escaped.special.coconut"
  escaped_characters_raw:
    match: "\\\\(\\'|\")"
    name: "constant.character.escaped.raw.special.coconut"
  escaped_unicode_characters:
    match: "\\\\(u\\h{4}|U\\h{8}|N\\{[a-zA-Z\\s]+\\})"
    name: "constant.character.escaped.coconut"
  format_escape:
    match: "({{|}})"
    name: "constant.character.escape.fmt.coconut"
  format_specifier:
    patterns: [
      {
        include: "#format_escape"
      }
      {
        begin: "({)(\\w*(\\.\\w+)*)?(!(a|r|s))?"
        beginCaptures:
          "1":
            name: "string.interpolated.brace.fmt.coconut"
          "2":
            name: "variable.parameter.subscriptor.fmt.coconut"
          "4":
            name: "keyword.operator.exclamation.fmt.coconut"
          "5":
            name: "support.constant.ascii_repr_str.fmt.coconut"
        end: "(})"
        endCaptures:
          "1":
            name: "string.interpolated.brace.fmt.coconut"
        name: "meta.interpolated.format.string.coconut"
        patterns: [
          {
            begin: "(:)"
            beginCaptures:
              "1":
                name: "keyword.operator.colon.fmt.coconut"
            end: "(?=})"
            name: "meta.interpolated.format.specifier.coconut"
            patterns: [
              {
                include: "#format_specifier_fill_align"
              }
              {
                include: "#format_specifier_sign"
              }
              {
                include: "#format_specifier_alternate_form"
              }
              {
                include: "#format_specifier_zero_padding"
              }
              {
                include: "#format_specifier_width"
              }
              {
                include: "#format_specifier_thousand_separator"
              }
              {
                include: "#format_specifier_precision"
              }
              {
                include: "#format_specifier_type"
              }
              {
                include: "#format_specifier"
              }
            ]
          }
          {
            include: "#format_specifier"
          }
        ]
      }
    ]
  format_specifier_alternate_form:
    begin: "(#)"
    beginCaptures:
      "1":
        name: "support.constant.alternate.fmt.coconut"
    end: "(?=})"
    name: "meta.alternate.fmt.coconut"
    patterns: [
      {
        include: "#format_specifier_zero_padding"
      }
      {
        include: "#format_specifier_width"
      }
      {
        include: "#format_specifier_thousand_separator"
      }
      {
        include: "#format_specifier_precision"
      }
      {
        include: "#format_specifier_type"
      }
      {
        include: "#format_specifier"
      }
    ]
  format_specifier_extended:
    patterns: [
      {
        include: "#format_escape"
      }
      {
        begin: "({)"
        beginCaptures:
          "1":
            name: "string.interpolated.brace.fmt.coconut"
        end: "(})"
        endCaptures:
          "1":
            name: "string.interpolated.brace.fmt.coconut"
        name: "meta.interpolated.format.fstring.coconut"
        patterns: [
          {
            include: "#format_specifier_extended_self"
          }
          {
            include: "#format_specifier_extended_ascii_repr_str"
          }
          {
            include: "#format_specifier_extended_colon"
          }
          {
            include: "#format_specifier_extended_fill_align"
          }
          {
            include: "#format_specifier_extended_sign"
          }
          {
            include: "#format_specifier_extended_alternate_form"
          }
          {
            include: "#format_specifier_extended_zero_padding"
          }
          {
            include: "#format_specifier_extended_width"
          }
          {
            include: "#format_specifier_extended_thousand_separator"
          }
          {
            include: "#format_specifier_extended_precision"
          }
          {
            include: "#format_specifier_extended_type"
          }
          {
            include: "#format_specifier_extended"
          }
        ]
      }
    ]
  format_specifier_extended_alternate_form:
    begin: "(#)"
    beginCaptures:
      "1":
        name: "support.constant.alternate.fmt.coconut"
    end: "(?=})"
    name: "meta.alternate.fmt.coconut"
    patterns: [
      {
        include: "#format_specifier_extended_zero_padding"
      }
      {
        include: "#format_specifier_extended_width"
      }
      {
        include: "#format_specifier_extended_thousand_separator"
      }
      {
        include: "#format_specifier_extended_precision"
      }
      {
        include: "#format_specifier_extended_type"
      }
      {
        include: "#format_specifier_extended"
      }
    ]
  format_specifier_extended_ascii_repr_str:
    patterns: [
      {
        begin: "(!(a|r|s))"
        beginCaptures:
          "1":
            name: "keyword.operator.exclamation.fmt.coconut"
          "2":
            name: "support.constant.ascii_repr_str.fmt.coconut"
        end: "(?=})"
        name: "meta.ascii_repr_str.coconut"
        patterns: [
          {
            include: "#format_specifier_extended_colon"
          }
          {
            include: "#format_specifier_extended_fill_align"
          }
          {
            include: "#format_specifier_extended_sign"
          }
          {
            include: "#format_specifier_extended_alternate_form"
          }
          {
            include: "#format_specifier_extended_zero_padding"
          }
          {
            include: "#format_specifier_extended_width"
          }
          {
            include: "#format_specifier_extended_thousand_separator"
          }
          {
            include: "#format_specifier_extended_precision"
          }
          {
            include: "#format_specifier_extended_type"
          }
          {
            include: "#format_specifier_extended"
          }
        ]
      }
    ]
  format_specifier_extended_colon:
    patterns: [
      {
        begin: "(:)"
        beginCaptures:
          "1":
            name: "keyword.operator.colon.fmt.coconut"
        end: "(?=})"
        name: "meta.colon.coconut"
        patterns: [
          {
            include: "#format_specifier_extended_fill_align"
          }
          {
            include: "#format_specifier_extended_sign"
          }
          {
            include: "#format_specifier_extended_alternate_form"
          }
          {
            include: "#format_specifier_extended_zero_padding"
          }
          {
            include: "#format_specifier_extended_width"
          }
          {
            include: "#format_specifier_extended_thousand_separator"
          }
          {
            include: "#format_specifier_extended_precision"
          }
          {
            include: "#format_specifier_extended_type"
          }
          {
            include: "#format_specifier_extended"
          }
        ]
      }
    ]
  format_specifier_extended_fill_align:
    begin: "([^{}]?(<|>|=|\\^))"
    beginCaptures:
      "1":
        name: "string.quoted.fill_char.fmt.coconut"
      "2":
        name: "keyword.operator.align.fmt.coconut"
    end: "(?=})"
    name: "meta.fill_char.fmt.coconut"
    patterns: [
      {
        include: "#format_specifier_extended_sign"
      }
      {
        include: "#format_specifier_extended_alternate_form"
      }
      {
        include: "#format_specifier_extended_zero_padding"
      }
      {
        include: "#format_specifier_extended_width"
      }
      {
        include: "#format_specifier_extended_thousand_separator"
      }
      {
        include: "#format_specifier_extended_precision"
      }
      {
        include: "#format_specifier_extended_type"
      }
      {
        include: "#format_specifier_extended"
      }
    ]
  format_specifier_extended_precision:
    begin: "(\\.\\d+)"
    beginCaptures:
      "1":
        name: "constant.character.precision.fmt.coconut"
    end: "(?=})"
    name: "meta.precision.fmt.coconut"
    patterns: [
      {
        include: "#format_specifier_extended_type"
      }
      {
        include: "#format_specifier_extended"
      }
    ]
  format_specifier_extended_self:
    patterns: [
      {
        begin: "(?<={)"
        end: "(?=!|:)"
        name: "meta.self.coconut"
        patterns: [
          {
            include: "$self"
          }
        ]
      }
    ]
  format_specifier_extended_sign:
    begin: "(\\+|-|\\s)"
    beginCaptures:
      "1":
        name: "keyword.operator.sign.fmt.coconut"
    end: "(?=})"
    name: "meta.sign.fmt.coconut"
    patterns: [
      {
        include: "#format_specifier_extended_alternate_form"
      }
      {
        include: "#format_specifier_extended_zero_padding"
      }
      {
        include: "#format_specifier_extended_width"
      }
      {
        include: "#format_specifier_extended_thousand_separator"
      }
      {
        include: "#format_specifier_extended_precision"
      }
      {
        include: "#format_specifier_extended_type"
      }
      {
        include: "#format_specifier_extended"
      }
    ]
  format_specifier_extended_thousand_separator:
    begin: "(,)"
    beginCaptures:
      "1":
        name: "keyword.operator.thousand_separator.fmt.coconut"
    end: "(?=})"
    name: "meta.thousand_separator.fmt.coconut"
    patterns: [
      {
        include: "#format_specifier_extended_precision"
      }
      {
        include: "#format_specifier_extended_type"
      }
      {
        include: "#format_specifier_extended"
      }
    ]
  format_specifier_extended_type:
    begin: "(b|c|d|e|E|f|F|g|G|n|o|s|x|X|%)"
    beginCaptures:
      "1":
        name: "constant.character.escape.type.fmt.coconut"
    end: "(?=})"
    name: "meta.type.fmt.coconut"
    patterns: [
      {
        include: "#format_specifier_extended"
      }
    ]
  format_specifier_extended_width:
    begin: "(\\d+)"
    beginCaptures:
      "1":
        name: "constant.character.width.fmt.coconut"
    end: "(?=})"
    name: "meta.width.fmt.coconut"
    patterns: [
      {
        include: "#format_specifier_extended_thousand_separator"
      }
      {
        include: "#format_specifier_extended_precision"
      }
      {
        include: "#format_specifier_extended_type"
      }
      {
        include: "#format_specifier_extended"
      }
    ]
  format_specifier_extended_zero_padding:
    begin: "(0)"
    beginCaptures:
      "1":
        name: "constant.character.escape.zero_padding.fmt.coconut"
    end: "(?=})"
    name: "meta.zero_padding.fmt.coconut"
    patterns: [
      {
        include: "#format_specifier_extended_width"
      }
      {
        include: "#format_specifier_extended_thousand_separator"
      }
      {
        include: "#format_specifier_extended_precision"
      }
      {
        include: "#format_specifier_extended_type"
      }
      {
        include: "#format_specifier_extended"
      }
    ]
  format_specifier_fill_align:
    begin: "([^{}]?(<|>|=|\\^))"
    beginCaptures:
      "1":
        name: "string.quoted.fill_char.fmt.coconut"
      "2":
        name: "keyword.operator.align.fmt.coconut"
    end: "(?=})"
    name: "meta.fill_char.fmt.coconut"
    patterns: [
      {
        include: "#format_specifier_sign"
      }
      {
        include: "#format_specifier_alternate_form"
      }
      {
        include: "#format_specifier_zero_padding"
      }
      {
        include: "#format_specifier_width"
      }
      {
        include: "#format_specifier_thousand_separator"
      }
      {
        include: "#format_specifier_precision"
      }
      {
        include: "#format_specifier_type"
      }
      {
        include: "#format_specifier"
      }
    ]
  format_specifier_precision:
    begin: "(\\.\\d+)"
    beginCaptures:
      "1":
        name: "constant.character.precision.fmt.coconut"
    end: "(?=})"
    name: "meta.precision.fmt.coconut"
    patterns: [
      {
        include: "#format_specifier_type"
      }
      {
        include: "#format_specifier"
      }
    ]
  format_specifier_sign:
    begin: "(\\+|-|\\s)"
    beginCaptures:
      "1":
        name: "keyword.operator.sign.fmt.coconut"
    end: "(?=})"
    name: "meta.sign.fmt.coconut"
    patterns: [
      {
        include: "#format_specifier_alternate_form"
      }
      {
        include: "#format_specifier_zero_padding"
      }
      {
        include: "#format_specifier_width"
      }
      {
        include: "#format_specifier_thousand_separator"
      }
      {
        include: "#format_specifier_precision"
      }
      {
        include: "#format_specifier_type"
      }
      {
        include: "#format_specifier"
      }
    ]
  format_specifier_thousand_separator:
    begin: "(,)"
    beginCaptures:
      "1":
        name: "keyword.operator.thousand_separator.fmt.coconut"
    end: "(?=})"
    name: "meta.thousand_separator.fmt.coconut"
    patterns: [
      {
        include: "#format_specifier_precision"
      }
      {
        include: "#format_specifier_type"
      }
      {
        include: "#format_specifier"
      }
    ]
  format_specifier_type:
    begin: "(b|c|d|e|E|f|F|g|G|n|o|s|x|X|%)"
    beginCaptures:
      "1":
        name: "constant.character.escape.type.fmt.coconut"
    end: "(?=})"
    name: "meta.type.fmt.coconut"
    patterns: [
      {
        include: "#format_specifier"
      }
    ]
  format_specifier_width:
    begin: "(\\d+)"
    beginCaptures:
      "1":
        name: "constant.character.width.fmt.coconut"
    end: "(?=})"
    name: "meta.width.fmt.coconut"
    patterns: [
      {
        include: "#format_specifier_thousand_separator"
      }
      {
        include: "#format_specifier_precision"
      }
      {
        include: "#format_specifier_type"
      }
      {
        include: "#format_specifier"
      }
    ]
  format_specifier_zero_padding:
    begin: "(0)"
    beginCaptures:
      "1":
        name: "constant.character.escape.zero_padding.fmt.coconut"
    end: "(?=})"
    name: "meta.zero_padding.fmt.coconut"
    patterns: [
      {
        include: "#format_specifier_width"
      }
      {
        include: "#format_specifier_thousand_separator"
      }
      {
        include: "#format_specifier_precision"
      }
      {
        include: "#format_specifier_type"
      }
      {
        include: "#format_specifier"
      }
    ]
  fstring_quoted:
    patterns: [
      {
        begin: "([fF])'''"
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.fmt.coconut"
        end: "'''"
        name: "string.quoted.single.block.fmt.coconut"
        patterns: [
          {
            include: "#string_patterns"
          }
          {
            include: "#format_specifier_extended"
          }
        ]
      }
      {
        begin: "([rR][fF]|[fF][rR])'''"
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.fmt.coconut"
        end: "'''"
        name: "string.quoted.single.block.fmt.coconut"
        patterns: [
          {
            include: "#escaped_characters_raw"
          }
          {
            include: "#format_specifier_extended"
          }
        ]
      }
      {
        begin: "([fF])'"
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.fmt.coconut"
        end: "'|(\\n)"
        endCaptures:
          "1":
            name: "invalid.illegal.unclosed_string.fmt.coconut"
        name: "string.quoted.single.line.fmt.coconut"
        patterns: [
          {
            include: "#string_patterns"
          }
          {
            include: "#format_specifier_extended"
          }
        ]
      }
      {
        begin: "([rR][fF]|[fF][rR])'"
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.fmt.coconut"
        end: "'|(\\n)"
        endCaptures:
          "1":
            name: "invalid.illegal.unclosed_string.fmt.coconut"
        name: "string.quoted.single.line.fmt.coconut"
        patterns: [
          {
            include: "#escaped_characters_raw"
          }
          {
            include: "#format_specifier_extended"
          }
        ]
      }
      {
        begin: "([fF])\"\"\""
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.fmt.coconut"
        end: "\"\"\""
        name: "string.quoted.double.block.fmt.coconut"
        patterns: [
          {
            include: "#string_patterns"
          }
          {
            include: "#format_specifier_extended"
          }
        ]
      }
      {
        begin: "([rR][fF]|[fF][rR])\"\"\""
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.fmt.coconut"
        end: "\"\"\""
        name: "string.quoted.double.block.fmt.coconut"
        patterns: [
          {
            include: "#escaped_characters_raw"
          }
          {
            include: "#format_specifier_extended"
          }
        ]
      }
      {
        begin: "([fF])\""
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.fmt.coconut"
        end: "\"|(\\n)"
        endCaptures:
          "1":
            name: "invalid.illegal.unclosed_string.fmt.coconut"
        name: "string.quoted.double.line.fmt.coconut"
        patterns: [
          {
            include: "#string_patterns"
          }
          {
            include: "#format_specifier_extended"
          }
        ]
      }
      {
        begin: "([rR][fF]|[fF][rR])\""
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.fmt.coconut"
        end: "\"|(\\n)"
        endCaptures:
          "1":
            name: "invalid.illegal.unclosed_string.fmt.coconut"
        name: "string.quoted.double.line.fmt.coconut"
        patterns: [
          {
            include: "#escaped_characters_raw"
          }
          {
            include: "#format_specifier_extended"
          }
        ]
      }
    ]
  function_annotation:
    begin: "\\s*(->)\\s*"
    beginCaptures:
      "1":
        name: "keyword.operator.annotation.assignment.coconut"
    end: "(?=\\s*[:=])"
    patterns: [
      {
        include: "$self"
      }
    ]
  function_arguments:
    begin: "\\("
    end: "(?=\\))"
    patterns: [
      {
        include: "#comment"
      }
      {
        begin: "\\b([a-zA-Z_]\\w*)\\s*(?:\\([^)]*\\)\\s*)?(=)"
        beginCaptures:
          "1":
            name: "variable.parameter.function.coconut"
          "2":
            name: "keyword.operator.assignment.coconut"
        end: "(?=[,\\n)])"
        patterns: [
          {
            begin: "(?<=(=))\\s*"
            beginCaptures:
              "1":
                name: "keyword.operator.assignment.coconut"
            end: "(?=[,\\n)])"
            patterns: [
              {
                include: "$self"
              }
            ]
          }
          {
            begin: "\\s*\\b(?=:|\\+|\\w)"
            end: "(?=(=)|[,\\n)])"
            endCaptures:
              "1":
                name: "keyword.operator.assignment.coconut"
            patterns: [
              {
                include: "$self"
              }
            ]
          }
        ]
      }
      {
        begin: "\\b([a-zA-Z_]\\w*)\\s*(?:\\([^)]*\\)\\s*)?"
        beginCaptures:
          "1":
            name: "variable.parameter.function.coconut"
        end: "(?=[,\\n()])"
        patterns: [
          {
            begin: "\\s*\\b(?=:|\\+|\\w)"
            end: "(?=[,\\n)])"
            patterns: [
              {
                include: "$self"
              }
            ]
          }
        ]
      }
    ]
  function_entity_name:
    begin: "(?=[a-zA-Z_]\\w*)"
    contentName: "entity.name.function.coconut"
    end: "(?!\\w)"
    patterns: [
      {
        include: "#entity_name_function"
      }
    ]
  generic_names:
    match: "[a-zA-Z_]\\w*"
  illegal_names:
    match: "\\b(and|as|assert|break|class|continue|def|del|elif|else|except|finally|for|from|global|if|import|in|is|lambda|nonlocal|not|or|pass|raise|return|try|while|with|yield|_coconut\\w*)\\b"
    name: "invalid.illegal_names.name.coconut"
  keyword_arguments:
    begin: "\\b([a-zA-Z_]\\w*)\\s*(=)(?!=)"
    beginCaptures:
      "1":
        name: "variable.parameter.function.coconut"
      "2":
        name: "keyword.operator.assignment.coconut"
    end: "(?=[,\\n)])"
    patterns: [
      {
        include: "$self"
      }
    ]
  language_variables:
    match: "\\b(self|cls)\\b"
    name: "variable.language.coconut"
  magic_function_names:
    match: "\\b__(abs|add|and|await|bool|bytes|call|ceil|complex|contains|copy|deepcopy|del|delattr|delete|delitem|dir|div|divmod|a?enter|eq|a?exit|float|floor|floordiv|format|ge|get|getattr|getattribute|getinitargs|getitem|getnewargs|getstate|gt|hash|hex|iadd|iand|idiv|ifloordiv|ilshift|imul|index|init|instancecheck|int|invert|ior|ipow|irshift|isub|a?iter|itruediv|ixor|le|len|lshift|lt|metaclass|missing|mod|mul|ne|neg|new|a?next|(py_)?oct|or|pos|pow|prepare|radd|rand|rdiv|rdivmod|reduce|reduce_ex|repr|reversed|rfloordiv|rlshift|rmod|rmul|ror|round|rpow|rrshift|rshift|rsub|rtruediv|rxor|set|setattr|setitem|setstate|sizeof|str|sub|subclasscheck|subclasshook|truediv|trunc|unicode|weakref|xor|fmap)__\\b"
    name: "support.function.magic.coconut"
  magic_variable_names:
    match: "\\b__(all|annotations|bases|builtins|class|debug|dict|doc|file|members|metaclass|mro|name|qualname|slots|weakref)__\\b"
    name: "support.variable.magic.coconut"
  regular_expressions:
    patterns: [
      {
        match: "(?<=\\()\\?(=|!|<=|<!|:|P<[a-zA-Z_]\\w*?>|\\(([1-9]\\d?|[a-zA-Z_]\\w*)\\))"
        name: "constant.character.escape.coconut"
      }
      {
        captures:
          "1":
            name: "constant.character.escape.coconut"
        match: "\\((\\?P=)([a-zA-Z_]\\w*)\\)"
        name: "keyword.other.group_reference_name.regex.coconut"
      }
      {
        captures:
          "1":
            name: "constant.character.escape.coconut"
        match: "(\\\\g)<([a-zA-Z_]\\w*|[1-9]\\d*)>"
        name: "keyword.other.group_reference_name.regex.coconut"
      }
      {
        match: "\\\\[bBAZzG]|\\^|\\$"
        name: "keyword.control.anchor.regex.coconut"
      }
      {
        match: "\\\\[1-9]\\d*"
        name: "keyword.other.group_reference_order.regex.coconut"
      }
      {
        match: "[?+*][?+]?|\\{(\\d+,\\d+|\\d+,|,\\d+|\\d+)\\}\\??"
        name: "keyword.operator.quantifier.regex.coconut"
      }
      {
        match: "\\|"
        name: "keyword.operator.or.regex.coconut"
      }
      {
        begin: "\\(\\?#"
        end: "\\)"
        name: "comment.block.regex.coconut"
      }
      {
        match: "\\(\\?[aiLmsux]+\\)"
        name: "keyword.other.option_toggle.regex.coconut"
      }
      {
        include: "#regular_expressions_escaped_characters"
      }
      {
        include: "#regular_expressions_character_classes"
      }
      {
        match: "[()]"
        name: "keyword.operator.group.regex.coconut"
      }
    ]
  regular_expressions_character_classes:
    patterns: [
      {
        match: "\\\\[wWsSdD]|\\."
        name: "constant.character.character_class.regex.coconut"
      }
      {
        begin: "\\[(\\^)?(\\](?=.*\\]))?"
        beginCaptures:
          "1":
            name: "keyword.operator.negation.regex.coconut"
        end: "\\]"
        name: "constant.other.character_class.set.regex.coconut"
        patterns: [
          {
            match: "\\[|\\\\\\\\|\\\\\\]"
            name: "constant.character.escaped.special.regex.except.coconut"
          }
          {
            include: "#regular_expressions_character_classes"
          }
          {
            include: "#regular_expressions_escaped_characters"
          }
        ]
      }
    ]
  regular_expressions_escaped_characters:
    match: "\\\\(\\\\|\\?|\\.|\\*|\\+|\\{|\\}|\\||\\(|\\)|\\[|\\]|\\^|\\$)"
    name: "constant.character.escaped.special.regex.coconut"
  rstring_quoted:
    patterns: [
      {
        begin: "([rR][bB]?|[bB][rR])'''"
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.coconut"
        end: "'''"
        name: "string.quoted.single.block.coconut"
        patterns: [
          {
            include: "#escaped_characters_raw"
          }
        ]
      }
      {
        begin: "([rR][bB]?|[bB][rR])'"
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.coconut"
        end: "'|(\\n)"
        endCaptures:
          "1":
            name: "invalid.illegal.unclosed_string.coconut"
        name: "string.quoted.single.line.coconut"
        patterns: [
          {
            include: "#escaped_characters_raw"
          }
        ]
      }
      {
        begin: "([rR][bB]?|[bB][rR])\"\"\""
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.coconut"
        end: "\"\"\""
        name: "string.quoted.double.block.coconut"
        patterns: [
          {
            include: "#escaped_characters_raw"
          }
        ]
      }
      {
        begin: "([rR][bB]?|[bB][rR])\""
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.coconut"
        end: "\"|(\\n)"
        endCaptures:
          "1":
            name: "invalid.illegal.unclosed_string.coconut"
        name: "string.quoted.double.line.coconut"
        patterns: [
          {
            include: "#escaped_characters_raw"
          }
        ]
      }
    ]
  string_patterns:
    patterns: [
      {
        include: "#escaped_characters"
      }
      {
        include: "#escaped_unicode_characters"
      }
    ]
  string_quoted:
    patterns: [
      {
        begin: "([bBuU]?)'''"
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.coconut"
        end: "'''"
        name: "string.quoted.single.block.coconut"
        patterns: [
          {
            include: "#string_patterns"
          }
        ]
      }
      {
        begin: "([bBuU]?)'"
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.coconut"
        end: "'|(\\n)"
        endCaptures:
          "1":
            name: "invalid.illegal.unclosed_string.coconut"
        name: "string.quoted.single.line.coconut"
        patterns: [
          {
            include: "#string_patterns"
          }
        ]
      }
      {
        begin: "([bBuU]?)\"\"\""
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.coconut"
        end: "\"\"\""
        name: "string.quoted.double.block.coconut"
        patterns: [
          {
            include: "#string_patterns"
          }
        ]
      }
      {
        begin: "([bBuU]?)\""
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.coconut"
        end: "\"|(\\n)"
        endCaptures:
          "1":
            name: "invalid.illegal.unclosed_string.coconut"
        name: "string.quoted.double.line.coconut"
        patterns: [
          {
            include: "#string_patterns"
          }
        ]
      }
    ]
  string_quoted_format:
    patterns: [
      {
        begin: "([uUbB]?)'''"
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.fmt.coconut"
        end: "'''"
        name: "string.quoted.single.block.fmt.coconut"
        patterns: [
          {
            include: "#string_patterns"
          }
          {
            include: "#format_specifier"
          }
        ]
      }
      {
        begin: "([rR][bB]?|[bB][rR])'''"
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.fmt.coconut"
        end: "'''"
        name: "string.quoted.single.block.fmt.coconut"
        patterns: [
          {
            include: "#escaped_characters_raw"
          }
          {
            include: "#format_specifier"
          }
        ]
      }
      {
        begin: "([uUbB]?)'"
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.fmt.coconut"
        end: "'|(\\n)"
        endCaptures:
          "1":
            name: "invalid.illegal.unclosed_string.fmt.coconut"
        name: "string.quoted.single.line.fmt.coconut"
        patterns: [
          {
            include: "#string_patterns"
          }
          {
            include: "#format_specifier"
          }
        ]
      }
      {
        begin: "([rR][bB]?|[bB][rR])'"
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.fmt.coconut"
        end: "'|(\\n)"
        endCaptures:
          "1":
            name: "invalid.illegal.unclosed_string.fmt.coconut"
        name: "string.quoted.single.line.fmt.coconut"
        patterns: [
          {
            include: "#escaped_characters_raw"
          }
          {
            include: "#format_specifier"
          }
        ]
      }
      {
        begin: "([uUbB]?)\"\"\""
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.fmt.coconut"
        end: "\"\"\""
        name: "string.quoted.double.block.fmt.coconut"
        patterns: [
          {
            include: "#string_patterns"
          }
          {
            include: "#format_specifier"
          }
        ]
      }
      {
        begin: "([rR][bB]?|[bB][rR])\"\"\""
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.fmt.coconut"
        end: "\"\"\""
        name: "string.quoted.double.block.fmt.coconut"
        patterns: [
          {
            include: "#escaped_characters_raw"
          }
          {
            include: "#format_specifier"
          }
        ]
      }
      {
        begin: "([uUbB]?)\""
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.fmt.coconut"
        end: "\"|(\\n)"
        endCaptures:
          "1":
            name: "invalid.illegal.unclosed_string.fmt.coconut"
        name: "string.quoted.double.line.fmt.coconut"
        patterns: [
          {
            include: "#string_patterns"
          }
          {
            include: "#format_specifier"
          }
        ]
      }
      {
        begin: "([rR][bB]?|[bB][rR])\""
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.fmt.coconut"
        end: "\"|(\\n)"
        endCaptures:
          "1":
            name: "invalid.illegal.unclosed_string.fmt.coconut"
        name: "string.quoted.double.line.fmt.coconut"
        patterns: [
          {
            include: "#escaped_characters_raw"
          }
          {
            include: "#format_specifier"
          }
        ]
      }
    ]
  string_quoted_old:
    patterns: [
      {
        begin: "([uUbB]?)'''"
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.fmt.coconut"
        end: "'''"
        name: "string.quoted.single.block.fmt.coconut"
        patterns: [
          {
            include: "#string_patterns"
          }
          {
            include: "#constant_placeholder"
          }
        ]
      }
      {
        begin: "([rR][bB]?|[bB][rR])'''"
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.fmt.coconut"
        end: "'''"
        name: "string.quoted.single.block.fmt.coconut"
        patterns: [
          {
            include: "#escaped_characters_raw"
          }
          {
            include: "#constant_placeholder"
          }
        ]
      }
      {
        begin: "([uUbB]?)'"
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.fmt.coconut"
        end: "'|(\\n)"
        endCaptures:
          "1":
            name: "invalid.illegal.unclosed_string.fmt.coconut"
        name: "string.quoted.single.line.fmt.coconut"
        patterns: [
          {
            include: "#string_patterns"
          }
          {
            include: "#constant_placeholder"
          }
        ]
      }
      {
        begin: "([rR][bB]?|[bB][rR])'"
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.fmt.coconut"
        end: "'|(\\n)"
        endCaptures:
          "1":
            name: "invalid.illegal.unclosed_string.fmt.coconut"
        name: "string.quoted.single.line.fmt.coconut"
        patterns: [
          {
            include: "#escaped_characters_raw"
          }
          {
            include: "#constant_placeholder"
          }
        ]
      }
      {
        begin: "([uUbB]?)\"\"\""
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.fmt.coconut"
        end: "\"\"\""
        name: "string.quoted.double.block.fmt.coconut"
        patterns: [
          {
            include: "#string_patterns"
          }
          {
            include: "#constant_placeholder"
          }
        ]
      }
      {
        begin: "([rR][bB]?|[bB][rR])\"\"\""
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.fmt.coconut"
        end: "\"\"\""
        name: "string.quoted.double.block.fmt.coconut"
        patterns: [
          {
            include: "#escaped_characters_raw"
          }
          {
            include: "#constant_placeholder"
          }
        ]
      }
      {
        begin: "([uUbB]?)\""
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.fmt.coconut"
        end: "\"|(\\n)"
        endCaptures:
          "1":
            name: "invalid.illegal.unclosed_string.fmt.coconut"
        name: "string.quoted.double.line.fmt.coconut"
        patterns: [
          {
            include: "#string_patterns"
          }
          {
            include: "#constant_placeholder"
          }
        ]
      }
      {
        begin: "([rR][bB]?|[bB][rR])\""
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.fmt.coconut"
        end: "\"|(\\n)"
        endCaptures:
          "1":
            name: "invalid.illegal.unclosed_string.fmt.coconut"
        name: "string.quoted.double.line.fmt.coconut"
        patterns: [
          {
            include: "#escaped_characters_raw"
          }
          {
            include: "#constant_placeholder"
          }
        ]
      }
    ]
  string_quoted_regex:
    patterns: [
      {
        begin: "([rR][bB]?|[bB][rR])'''"
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.re.coconut"
        end: "'''"
        name: "string.quoted.single.block.re.coconut"
        patterns: [
          {
            include: "#string_patterns"
          }
          {
            include: "#regular_expressions"
          }
          {
            include: "#comment"
          }
        ]
      }
      {
        begin: "([rR][bB]?|[bB][rR])'"
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.re.coconut"
        end: "'|(\\n)"
        endCaptures:
          "1":
            name: "invalid.illegal.unclosed_string.re.coconut"
        name: "string.quoted.single.line.re.coconut"
        patterns: [
          {
            include: "#string_patterns"
          }
          {
            include: "#regular_expressions"
          }
        ]
      }
      {
        begin: "([rR][bB]?|[bB][rR])\"\"\""
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.re.coconut"
        end: "\"\"\""
        name: "string.quoted.double.block.re.coconut"
        patterns: [
          {
            include: "#string_patterns"
          }
          {
            include: "#regular_expressions"
          }
          {
            include: "#comment"
          }
        ]
      }
      {
        begin: "([rR][bB]?|[bB][rR])\""
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.re.coconut"
        end: "\"|(\\n)"
        endCaptures:
          "1":
            name: "invalid.illegal.unclosed_string.re.coconut"
        name: "string.quoted.double.line.re.coconut"
        patterns: [
          {
            include: "#string_patterns"
          }
          {
            include: "#regular_expressions"
          }
        ]
      }
    ]
  string_quoted_template:
    patterns: [
      {
        begin: "([uUbB]?)'''"
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.fmt.coconut"
        end: "'''"
        name: "string.quoted.single.block.fmt.coconut"
        patterns: [
          {
            include: "#string_patterns"
          }
          {
            include: "#template_string"
          }
        ]
      }
      {
        begin: "([rR][bB]?|[bB][rR])'''"
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.fmt.coconut"
        end: "'''"
        name: "string.quoted.single.block.fmt.coconut"
        patterns: [
          {
            include: "#escaped_characters_raw"
          }
          {
            include: "#template_string"
          }
        ]
      }
      {
        begin: "([uUbB]?)'"
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.fmt.coconut"
        end: "'|(\\n)"
        endCaptures:
          "1":
            name: "invalid.illegal.unclosed_string.fmt.coconut"
        name: "string.quoted.single.line.fmt.coconut"
        patterns: [
          {
            include: "#string_patterns"
          }
          {
            include: "#template_string"
          }
        ]
      }
      {
        begin: "([rR][bB]?|[bB][rR])'"
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.fmt.coconut"
        end: "'|(\\n)"
        endCaptures:
          "1":
            name: "invalid.illegal.unclosed_string.fmt.coconut"
        name: "string.quoted.single.line.fmt.coconut"
        patterns: [
          {
            include: "#escaped_characters_raw"
          }
          {
            include: "#template_string"
          }
        ]
      }
      {
        begin: "([uUbB]?)\"\"\""
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.fmt.coconut"
        end: "\"\"\""
        name: "string.quoted.double.block.fmt.coconut"
        patterns: [
          {
            include: "#string_patterns"
          }
          {
            include: "#template_string"
          }
        ]
      }
      {
        begin: "([rR][bB]?|[bB][rR])\"\"\""
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.fmt.coconut"
        end: "\"\"\""
        name: "string.quoted.double.block.fmt.coconut"
        patterns: [
          {
            include: "#escaped_characters_raw"
          }
          {
            include: "#template_string"
          }
        ]
      }
      {
        begin: "([uUbB]?)\""
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.fmt.coconut"
        end: "\"|(\\n)"
        endCaptures:
          "1":
            name: "invalid.illegal.unclosed_string.fmt.coconut"
        name: "string.quoted.double.line.fmt.coconut"
        patterns: [
          {
            include: "#string_patterns"
          }
          {
            include: "#template_string"
          }
        ]
      }
      {
        begin: "([rR][bB]?|[bB][rR])\""
        beginCaptures:
          "1":
            name: "storage.type.string.prefix.fmt.coconut"
        end: "\"|(\\n)"
        endCaptures:
          "1":
            name: "invalid.illegal.unclosed_string.fmt.coconut"
        name: "string.quoted.double.line.fmt.coconut"
        patterns: [
          {
            include: "#escaped_characters_raw"
          }
          {
            include: "#template_string"
          }
        ]
      }
    ]
  template_string:
    match: "\\$(\\$|[a-zA-Z_]\\w*|{[a-zA-Z_]\\w*})"
    name: "string.interpolated.template.coconut"
scopeName: "source.coconut"
